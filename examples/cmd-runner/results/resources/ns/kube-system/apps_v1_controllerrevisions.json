{"apiVersion":"apps/v1","items":[{"apiVersion":"apps/v1","data":{"spec":{"template":{"$patch":"replace","metadata":{"creationTimestamp":null,"labels":{"k8s-app":"azure-ip-masq-agent","tier":"node"}},"spec":{"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchExpressions":[{"key":"kubernetes.azure.com/cluster","operator":"Exists"},{"key":"type","operator":"NotIn","values":["virtual-kubelet"]},{"key":"kubernetes.io/os","operator":"In","values":["linux"]}]}]}}},"containers":[{"args":["--v=2","--resync-interval=60"],"image":"mcr.microsoft.com/aks/ip-masq-agent-v2:v0.1.3","imagePullPolicy":"IfNotPresent","name":"azure-ip-masq-agent","resources":{"limits":{"cpu":"500m","memory":"250Mi"},"requests":{"cpu":"100m","memory":"50Mi"}},"securityContext":{"capabilities":{"add":["NET_ADMIN","NET_RAW"]}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/etc/config","name":"azure-ip-masq-agent-config-volume"},{"mountPath":"/run/xtables.lock","name":"iptableslock"}]}],"dnsPolicy":"ClusterFirst","hostNetwork":true,"priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"terminationGracePeriodSeconds":30,"tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"effect":"NoExecute","operator":"Exists"},{"effect":"NoSchedule","operator":"Exists"}],"volumes":[{"name":"azure-ip-masq-agent-config-volume","projected":{"defaultMode":420,"sources":[{"configMap":{"items":[{"key":"ip-masq-agent","mode":444,"path":"ip-masq-agent"}],"name":"azure-ip-masq-agent-config","optional":true}},{"configMap":{"items":[{"key":"ip-masq-agent-reconciled","mode":444,"path":"ip-masq-agent-reconciled"}],"name":"azure-ip-masq-agent-config-reconciled","optional":true}}]}},{"hostPath":{"path":"/run/xtables.lock","type":"FileOrCreate"},"name":"iptableslock"}]}}}},"kind":"ControllerRevision","metadata":{"annotations":{"deprecated.daemonset.template.generation":"1","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"addonmanager.kubernetes.io/mode\":\"Reconcile\",\"component\":\"azure-ip-masq-agent\",\"kubernetes.io/cluster-service\":\"true\",\"tier\":\"node\"},\"name\":\"azure-ip-masq-agent\",\"namespace\":\"kube-system\"},\"spec\":{\"minReadySeconds\":60,\"selector\":{\"matchLabels\":{\"k8s-app\":\"azure-ip-masq-agent\",\"tier\":\"node\"}},\"template\":{\"metadata\":{\"labels\":{\"k8s-app\":\"azure-ip-masq-agent\",\"tier\":\"node\"}},\"spec\":{\"affinity\":{\"nodeAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":{\"nodeSelectorTerms\":[{\"labelSelector\":null,\"matchExpressions\":[{\"key\":\"kubernetes.azure.com/cluster\",\"operator\":\"Exists\"},{\"key\":\"type\",\"operator\":\"NotIn\",\"values\":[\"virtual-kubelet\"]},{\"key\":\"kubernetes.io/os\",\"operator\":\"In\",\"values\":[\"linux\"]}]}]}}},\"containers\":[{\"args\":[\"--v=2\",\"--resync-interval=60\"],\"image\":\"mcr.microsoft.com/aks/ip-masq-agent-v2:v0.1.3\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"azure-ip-masq-agent\",\"resources\":{\"limits\":{\"cpu\":\"500m\",\"memory\":\"250Mi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"50Mi\"}},\"securityContext\":{\"capabilities\":{\"add\":[\"NET_ADMIN\",\"NET_RAW\"]}},\"volumeMounts\":[{\"mountPath\":\"/etc/config\",\"name\":\"azure-ip-masq-agent-config-volume\"},{\"mountPath\":\"/run/xtables.lock\",\"name\":\"iptableslock\"}]}],\"hostNetwork\":true,\"priorityClassName\":\"system-node-critical\",\"tolerations\":[{\"key\":\"CriticalAddonsOnly\",\"operator\":\"Exists\"},{\"effect\":\"NoExecute\",\"operator\":\"Exists\"},{\"effect\":\"NoSchedule\",\"operator\":\"Exists\"}],\"volumes\":[{\"name\":\"azure-ip-masq-agent-config-volume\",\"projected\":{\"sources\":[{\"configMap\":{\"items\":[{\"key\":\"ip-masq-agent\",\"mode\":444,\"path\":\"ip-masq-agent\"}],\"name\":\"azure-ip-masq-agent-config\",\"optional\":true}},{\"configMap\":{\"items\":[{\"key\":\"ip-masq-agent-reconciled\",\"mode\":444,\"path\":\"ip-masq-agent-reconciled\"}],\"name\":\"azure-ip-masq-agent-config-reconciled\",\"optional\":true}}]}},{\"hostPath\":{\"path\":\"/run/xtables.lock\",\"type\":\"FileOrCreate\"},\"name\":\"iptableslock\"}]}},\"updateStrategy\":{\"rollingUpdate\":{\"maxUnavailable\":\"25%\"},\"type\":\"RollingUpdate\"}}}\n"},"creationTimestamp":"2022-07-23T14:09:43Z","labels":{"controller-revision-hash":"7d65bc8db6","k8s-app":"azure-ip-masq-agent","tier":"node"},"name":"azure-ip-masq-agent-7d65bc8db6","namespace":"kube-system","ownerReferences":[{"apiVersion":"apps/v1","blockOwnerDeletion":true,"controller":true,"kind":"DaemonSet","name":"azure-ip-masq-agent","uid":"caa0f381-f4a7-4f99-92d3-982ecac3e610"}],"resourceVersion":"420","uid":"58b64f9f-999a-43f6-afbd-31eff78d74ce"},"revision":1},{"apiVersion":"apps/v1","data":{"spec":{"template":{"$patch":"replace","metadata":{"annotations":{"cluster-autoscaler.kubernetes.io/daemonset-pod":"true"},"creationTimestamp":null,"labels":{"k8s-app":"cloud-node-manager"}},"spec":{"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchExpressions":[{"key":"kubernetes.azure.com/cluster","operator":"Exists"},{"key":"type","operator":"NotIn","values":["virtual-kubelet"]},{"key":"kubernetes.io/os","operator":"In","values":["linux"]}]}]}}},"containers":[{"command":["cloud-node-manager","--node-name=$(NODE_NAME)","--wait-routes"],"env":[{"name":"NODE_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"spec.nodeName"}}}],"image":"mcr.microsoft.com/oss/kubernetes/azure-cloud-node-manager:v1.23.11","imagePullPolicy":"IfNotPresent","name":"cloud-node-manager","resources":{"limits":{"cpu":"2","memory":"512Mi"},"requests":{"cpu":"50m","memory":"50Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File"}],"dnsPolicy":"ClusterFirst","hostNetwork":true,"priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"cloud-node-manager","serviceAccountName":"cloud-node-manager","terminationGracePeriodSeconds":30,"tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"effect":"NoSchedule","key":"node-role.kubernetes.io/master","operator":"Equal","value":"true"},{"effect":"NoExecute","operator":"Exists"},{"effect":"NoSchedule","operator":"Exists"}]}}}},"kind":"ControllerRevision","metadata":{"annotations":{"deprecated.daemonset.template.generation":"1","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"addonmanager.kubernetes.io/mode\":\"Reconcile\",\"k8s-app\":\"cloud-node-manager\",\"kubernetes.io/cluster-service\":\"true\"},\"name\":\"cloud-node-manager\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"k8s-app\":\"cloud-node-manager\"}},\"template\":{\"metadata\":{\"annotations\":{\"cluster-autoscaler.kubernetes.io/daemonset-pod\":\"true\"},\"labels\":{\"k8s-app\":\"cloud-node-manager\"}},\"spec\":{\"affinity\":{\"nodeAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":{\"nodeSelectorTerms\":[{\"matchExpressions\":[{\"key\":\"kubernetes.azure.com/cluster\",\"operator\":\"Exists\"},{\"key\":\"type\",\"operator\":\"NotIn\",\"values\":[\"virtual-kubelet\"]},{\"key\":\"kubernetes.io/os\",\"operator\":\"In\",\"values\":[\"linux\"]}]}]}}},\"containers\":[{\"command\":[\"cloud-node-manager\",\"--node-name=$(NODE_NAME)\",\"--wait-routes\"],\"env\":[{\"name\":\"NODE_NAME\",\"valueFrom\":{\"fieldRef\":{\"fieldPath\":\"spec.nodeName\"}}}],\"image\":\"mcr.microsoft.com/oss/kubernetes/azure-cloud-node-manager:v1.23.11\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"cloud-node-manager\",\"resources\":{\"limits\":{\"cpu\":\"2000m\",\"memory\":\"512Mi\"},\"requests\":{\"cpu\":\"50m\",\"memory\":\"50Mi\"}}}],\"hostNetwork\":true,\"priorityClassName\":\"system-node-critical\",\"serviceAccountName\":\"cloud-node-manager\",\"tolerations\":[{\"key\":\"CriticalAddonsOnly\",\"operator\":\"Exists\"},{\"effect\":\"NoSchedule\",\"key\":\"node-role.kubernetes.io/master\",\"operator\":\"Equal\",\"value\":\"true\"},{\"effect\":\"NoExecute\",\"operator\":\"Exists\"},{\"effect\":\"NoSchedule\",\"operator\":\"Exists\"}]}}}}\n"},"creationTimestamp":"2022-07-23T14:09:43Z","labels":{"controller-revision-hash":"7b48f5ffb6","k8s-app":"cloud-node-manager"},"name":"cloud-node-manager-7b48f5ffb6","namespace":"kube-system","ownerReferences":[{"apiVersion":"apps/v1","blockOwnerDeletion":true,"controller":true,"kind":"DaemonSet","name":"cloud-node-manager","uid":"7f562242-bcb3-41da-9341-5eca67960c8e"}],"resourceVersion":"419","uid":"1f8cc892-3fc5-4824-bf67-0a519d22152a"},"revision":1},{"apiVersion":"apps/v1","data":{"spec":{"template":{"$patch":"replace","metadata":{"annotations":{"cluster-autoscaler.kubernetes.io/daemonset-pod":"true"},"creationTimestamp":null,"labels":{"k8s-app":"cloud-node-manager-windows"}},"spec":{"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchExpressions":[{"key":"kubernetes.azure.com/cluster","operator":"Exists"},{"key":"type","operator":"NotIn","values":["virtual-kubelet"]},{"key":"kubernetes.io/os","operator":"In","values":["windows"]}]}]}}},"containers":[{"command":["/cloud-node-manager.exe","--node-name=$(NODE_NAME)"],"env":[{"name":"NODE_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"spec.nodeName"}}}],"image":"mcr.microsoft.com/oss/kubernetes/azure-cloud-node-manager:v1.23.11","imagePullPolicy":"IfNotPresent","name":"cloud-node-manager","resources":{"limits":{"cpu":"2","memory":"512Mi"},"requests":{"cpu":"50m","memory":"50Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File"}],"dnsPolicy":"ClusterFirst","priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"cloud-node-manager","serviceAccountName":"cloud-node-manager","terminationGracePeriodSeconds":30,"tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"effect":"NoSchedule","key":"node-role.kubernetes.io/master","operator":"Equal","value":"true"},{"effect":"NoExecute","operator":"Exists"},{"effect":"NoSchedule","operator":"Exists"}]}}}},"kind":"ControllerRevision","metadata":{"annotations":{"deprecated.daemonset.template.generation":"1","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"addonmanager.kubernetes.io/mode\":\"Reconcile\",\"k8s-app\":\"cloud-node-manager\",\"kubernetes.io/cluster-service\":\"true\"},\"name\":\"cloud-node-manager-windows\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"k8s-app\":\"cloud-node-manager-windows\"}},\"template\":{\"metadata\":{\"annotations\":{\"cluster-autoscaler.kubernetes.io/daemonset-pod\":\"true\"},\"labels\":{\"k8s-app\":\"cloud-node-manager-windows\"}},\"spec\":{\"affinity\":{\"nodeAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":{\"nodeSelectorTerms\":[{\"matchExpressions\":[{\"key\":\"kubernetes.azure.com/cluster\",\"operator\":\"Exists\"},{\"key\":\"type\",\"operator\":\"NotIn\",\"values\":[\"virtual-kubelet\"]},{\"key\":\"kubernetes.io/os\",\"operator\":\"In\",\"values\":[\"windows\"]}]}]}}},\"containers\":[{\"command\":[\"/cloud-node-manager.exe\",\"--node-name=$(NODE_NAME)\"],\"env\":[{\"name\":\"NODE_NAME\",\"valueFrom\":{\"fieldRef\":{\"fieldPath\":\"spec.nodeName\"}}}],\"image\":\"mcr.microsoft.com/oss/kubernetes/azure-cloud-node-manager:v1.23.11\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"cloud-node-manager\",\"resources\":{\"limits\":{\"cpu\":\"2000m\",\"memory\":\"512Mi\"},\"requests\":{\"cpu\":\"50m\",\"memory\":\"50Mi\"}}}],\"priorityClassName\":\"system-node-critical\",\"serviceAccountName\":\"cloud-node-manager\",\"tolerations\":[{\"key\":\"CriticalAddonsOnly\",\"operator\":\"Exists\"},{\"effect\":\"NoSchedule\",\"key\":\"node-role.kubernetes.io/master\",\"operator\":\"Equal\",\"value\":\"true\"},{\"effect\":\"NoExecute\",\"operator\":\"Exists\"},{\"effect\":\"NoSchedule\",\"operator\":\"Exists\"}]}}}}\n"},"creationTimestamp":"2022-07-23T14:09:43Z","labels":{"controller-revision-hash":"67d9db8f95","k8s-app":"cloud-node-manager-windows"},"name":"cloud-node-manager-windows-67d9db8f95","namespace":"kube-system","ownerReferences":[{"apiVersion":"apps/v1","blockOwnerDeletion":true,"controller":true,"kind":"DaemonSet","name":"cloud-node-manager-windows","uid":"9612e0f0-3f1b-4cf9-9225-6f30d3d459de"}],"resourceVersion":"424","uid":"68f5e4e9-2c22-4f13-bd71-2ecf47c2e076"},"revision":1},{"apiVersion":"apps/v1","data":{"spec":{"template":{"$patch":"replace","metadata":{"creationTimestamp":null,"labels":{"app":"csi-azuredisk-node"}},"spec":{"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchExpressions":[{"key":"kubernetes.azure.com/cluster","operator":"Exists"},{"key":"type","operator":"NotIn","values":["virtual-kubelet"]},{"key":"kubernetes.io/os","operator":"In","values":["linux"]}]}]}}},"containers":[{"args":["--csi-address=/csi/csi.sock","--probe-timeout=3s","--health-port=29603","--v=2"],"image":"mcr.microsoft.com/oss/kubernetes-csi/livenessprobe:v2.6.0","imagePullPolicy":"IfNotPresent","name":"liveness-probe","resources":{"limits":{"memory":"100Mi"},"requests":{"cpu":"10m","memory":"20Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/csi","name":"socket-dir"}]},{"args":["--csi-address=$(ADDRESS)","--kubelet-registration-path=$(DRIVER_REG_SOCK_PATH)","--v=2"],"env":[{"name":"ADDRESS","value":"/csi/csi.sock"},{"name":"DRIVER_REG_SOCK_PATH","value":"/var/lib/kubelet/plugins/disk.csi.azure.com/csi.sock"}],"image":"mcr.microsoft.com/oss/kubernetes-csi/csi-node-driver-registrar:v2.5.0","imagePullPolicy":"IfNotPresent","livenessProbe":{"exec":{"command":["/csi-node-driver-registrar","--kubelet-registration-path=$(DRIVER_REG_SOCK_PATH)","--mode=kubelet-registration-probe"]},"failureThreshold":3,"initialDelaySeconds":60,"periodSeconds":10,"successThreshold":1,"timeoutSeconds":30},"name":"node-driver-registrar","resources":{"limits":{"memory":"100Mi"},"requests":{"cpu":"10m","memory":"20Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/csi","name":"socket-dir"},{"mountPath":"/registration","name":"registration-dir"}]},{"args":["--v=5","--endpoint=$(CSI_ENDPOINT)","--nodeid=$(KUBE_NODE_NAME)","--metrics-address=0.0.0.0:29605","--enable-perf-optimization=true"],"env":[{"name":"AZURE_CREDENTIAL_FILE","value":"/etc/kubernetes/azure.json"},{"name":"CSI_ENDPOINT","value":"unix:///csi/csi.sock"},{"name":"KUBE_NODE_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"spec.nodeName"}}}],"image":"mcr.microsoft.com/oss/kubernetes-csi/azuredisk-csi:v1.19.0","imagePullPolicy":"IfNotPresent","livenessProbe":{"failureThreshold":5,"httpGet":{"path":"/healthz","port":"healthz","scheme":"HTTP"},"initialDelaySeconds":30,"periodSeconds":30,"successThreshold":1,"timeoutSeconds":10},"name":"azuredisk","ports":[{"containerPort":29603,"hostPort":29603,"name":"healthz","protocol":"TCP"}],"resources":{"limits":{"memory":"200Mi"},"requests":{"cpu":"10m","memory":"20Mi"}},"securityContext":{"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/csi","name":"socket-dir"},{"mountPath":"/var/lib/kubelet/","mountPropagation":"Bidirectional","name":"mountpoint-dir"},{"mountPath":"/etc/kubernetes/","name":"azure-cred"},{"mountPath":"/dev","name":"device-dir"},{"mountPath":"/sys/bus/scsi/devices","name":"sys-devices-dir"},{"mountPath":"/sys/class/scsi_host/","name":"scsi-host-dir"}]}],"dnsPolicy":"Default","hostNetwork":true,"priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"csi-azuredisk-node-sa","serviceAccountName":"csi-azuredisk-node-sa","terminationGracePeriodSeconds":30,"tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"effect":"NoExecute","operator":"Exists"},{"effect":"NoSchedule","operator":"Exists"}],"volumes":[{"hostPath":{"path":"/var/lib/kubelet/plugins/disk.csi.azure.com","type":"DirectoryOrCreate"},"name":"socket-dir"},{"hostPath":{"path":"/var/lib/kubelet/","type":"DirectoryOrCreate"},"name":"mountpoint-dir"},{"hostPath":{"path":"/var/lib/kubelet/plugins_registry/","type":"DirectoryOrCreate"},"name":"registration-dir"},{"hostPath":{"path":"/etc/kubernetes/","type":"DirectoryOrCreate"},"name":"azure-cred"},{"hostPath":{"path":"/dev","type":"Directory"},"name":"device-dir"},{"hostPath":{"path":"/sys/bus/scsi/devices","type":"Directory"},"name":"sys-devices-dir"},{"hostPath":{"path":"/sys/class/scsi_host/","type":"Directory"},"name":"scsi-host-dir"}]}}}},"kind":"ControllerRevision","metadata":{"annotations":{"deprecated.daemonset.template.generation":"1","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"addonmanager.kubernetes.io/mode\":\"Reconcile\",\"kubernetes.io/cluster-service\":\"true\"},\"name\":\"csi-azuredisk-node\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"app\":\"csi-azuredisk-node\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"csi-azuredisk-node\"}},\"spec\":{\"affinity\":{\"nodeAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":{\"nodeSelectorTerms\":[{\"matchExpressions\":[{\"key\":\"kubernetes.azure.com/cluster\",\"operator\":\"Exists\"},{\"key\":\"type\",\"operator\":\"NotIn\",\"values\":[\"virtual-kubelet\"]},{\"key\":\"kubernetes.io/os\",\"operator\":\"In\",\"values\":[\"linux\"]}]}]}}},\"containers\":[{\"args\":[\"--csi-address=/csi/csi.sock\",\"--probe-timeout=3s\",\"--health-port=29603\",\"--v=2\"],\"image\":\"mcr.microsoft.com/oss/kubernetes-csi/livenessprobe:v2.6.0\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"liveness-probe\",\"resources\":{\"limits\":{\"memory\":\"100Mi\"},\"requests\":{\"cpu\":\"10m\",\"memory\":\"20Mi\"}},\"volumeMounts\":[{\"mountPath\":\"/csi\",\"name\":\"socket-dir\"}]},{\"args\":[\"--csi-address=$(ADDRESS)\",\"--kubelet-registration-path=$(DRIVER_REG_SOCK_PATH)\",\"--v=2\"],\"env\":[{\"name\":\"ADDRESS\",\"value\":\"/csi/csi.sock\"},{\"name\":\"DRIVER_REG_SOCK_PATH\",\"value\":\"/var/lib/kubelet/plugins/disk.csi.azure.com/csi.sock\"}],\"image\":\"mcr.microsoft.com/oss/kubernetes-csi/csi-node-driver-registrar:v2.5.0\",\"imagePullPolicy\":\"IfNotPresent\",\"livenessProbe\":{\"exec\":{\"command\":[\"/csi-node-driver-registrar\",\"--kubelet-registration-path=$(DRIVER_REG_SOCK_PATH)\",\"--mode=kubelet-registration-probe\"]},\"initialDelaySeconds\":60,\"timeoutSeconds\":30},\"name\":\"node-driver-registrar\",\"resources\":{\"limits\":{\"memory\":\"100Mi\"},\"requests\":{\"cpu\":\"10m\",\"memory\":\"20Mi\"}},\"volumeMounts\":[{\"mountPath\":\"/csi\",\"name\":\"socket-dir\"},{\"mountPath\":\"/registration\",\"name\":\"registration-dir\"}]},{\"args\":[\"--v=5\",\"--endpoint=$(CSI_ENDPOINT)\",\"--nodeid=$(KUBE_NODE_NAME)\",\"--metrics-address=0.0.0.0:29605\",\"--enable-perf-optimization=true\"],\"env\":[{\"name\":\"AZURE_CREDENTIAL_FILE\",\"value\":\"/etc/kubernetes/azure.json\"},{\"name\":\"CSI_ENDPOINT\",\"value\":\"unix:///csi/csi.sock\"},{\"name\":\"KUBE_NODE_NAME\",\"valueFrom\":{\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"spec.nodeName\"}}}],\"image\":\"mcr.microsoft.com/oss/kubernetes-csi/azuredisk-csi:v1.19.0\",\"imagePullPolicy\":\"IfNotPresent\",\"livenessProbe\":{\"failureThreshold\":5,\"httpGet\":{\"path\":\"/healthz\",\"port\":\"healthz\"},\"initialDelaySeconds\":30,\"periodSeconds\":30,\"timeoutSeconds\":10},\"name\":\"azuredisk\",\"ports\":[{\"containerPort\":29603,\"name\":\"healthz\",\"protocol\":\"TCP\"}],\"resources\":{\"limits\":{\"memory\":\"200Mi\"},\"requests\":{\"cpu\":\"10m\",\"memory\":\"20Mi\"}},\"securityContext\":{\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/csi\",\"name\":\"socket-dir\"},{\"mountPath\":\"/var/lib/kubelet/\",\"mountPropagation\":\"Bidirectional\",\"name\":\"mountpoint-dir\"},{\"mountPath\":\"/etc/kubernetes/\",\"name\":\"azure-cred\"},{\"mountPath\":\"/dev\",\"name\":\"device-dir\"},{\"mountPath\":\"/sys/bus/scsi/devices\",\"name\":\"sys-devices-dir\"},{\"mountPath\":\"/sys/class/scsi_host/\",\"name\":\"scsi-host-dir\"}]}],\"dnsPolicy\":\"Default\",\"hostNetwork\":true,\"priorityClassName\":\"system-node-critical\",\"serviceAccountName\":\"csi-azuredisk-node-sa\",\"tolerations\":[{\"key\":\"CriticalAddonsOnly\",\"operator\":\"Exists\"},{\"effect\":\"NoExecute\",\"operator\":\"Exists\"},{\"effect\":\"NoSchedule\",\"operator\":\"Exists\"}],\"volumes\":[{\"hostPath\":{\"path\":\"/var/lib/kubelet/plugins/disk.csi.azure.com\",\"type\":\"DirectoryOrCreate\"},\"name\":\"socket-dir\"},{\"hostPath\":{\"path\":\"/var/lib/kubelet/\",\"type\":\"DirectoryOrCreate\"},\"name\":\"mountpoint-dir\"},{\"hostPath\":{\"path\":\"/var/lib/kubelet/plugins_registry/\",\"type\":\"DirectoryOrCreate\"},\"name\":\"registration-dir\"},{\"hostPath\":{\"path\":\"/etc/kubernetes/\",\"type\":\"DirectoryOrCreate\"},\"name\":\"azure-cred\"},{\"hostPath\":{\"path\":\"/dev\",\"type\":\"Directory\"},\"name\":\"device-dir\"},{\"hostPath\":{\"path\":\"/sys/bus/scsi/devices\",\"type\":\"Directory\"},\"name\":\"sys-devices-dir\"},{\"hostPath\":{\"path\":\"/sys/class/scsi_host/\",\"type\":\"Directory\"},\"name\":\"scsi-host-dir\"}]}}}}\n"},"creationTimestamp":"2022-07-23T14:09:43Z","labels":{"app":"csi-azuredisk-node","controller-revision-hash":"575c7557f8"},"name":"csi-azuredisk-node-575c7557f8","namespace":"kube-system","ownerReferences":[{"apiVersion":"apps/v1","blockOwnerDeletion":true,"controller":true,"kind":"DaemonSet","name":"csi-azuredisk-node","uid":"2e676b72-3bc5-445f-8f6f-8c1c20820953"}],"resourceVersion":"475","uid":"bb779e03-f868-42db-9c2b-7312946aee97"},"revision":1},{"apiVersion":"apps/v1","data":{"spec":{"template":{"$patch":"replace","metadata":{"creationTimestamp":null,"labels":{"app":"csi-azuredisk-node-win"}},"spec":{"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchExpressions":[{"key":"kubernetes.azure.com/cluster","operator":"Exists"},{"key":"type","operator":"NotIn","values":["virtual-kubelet"]},{"key":"kubernetes.io/os","operator":"In","values":["windows"]}]}]}}},"containers":[{"args":["--csi-address=$(CSI_ENDPOINT)","--probe-timeout=3s","--health-port=29603","--v=2"],"env":[{"name":"CSI_ENDPOINT","value":"unix://C:\\\\csi\\\\csi.sock"}],"image":"mcr.microsoft.com/oss/kubernetes-csi/livenessprobe:v2.6.0","imagePullPolicy":"IfNotPresent","name":"liveness-probe","resources":{"limits":{"memory":"200Mi"},"requests":{"cpu":"10m"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"C:\\csi","name":"plugin-dir"}]},{"args":["--v=2","--csi-address=$(CSI_ENDPOINT)","--kubelet-registration-path=$(DRIVER_REG_SOCK_PATH)"],"env":[{"name":"CSI_ENDPOINT","value":"unix://C:\\\\csi\\\\csi.sock"},{"name":"DRIVER_REG_SOCK_PATH","value":"C:\\\\var\\\\lib\\\\kubelet\\\\plugins\\\\disk.csi.azure.com\\\\csi.sock"},{"name":"KUBE_NODE_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"spec.nodeName"}}}],"image":"mcr.microsoft.com/oss/kubernetes-csi/csi-node-driver-registrar:v2.5.0","imagePullPolicy":"IfNotPresent","livenessProbe":{"exec":{"command":["/csi-node-driver-registrar.exe","--kubelet-registration-path=$(DRIVER_REG_SOCK_PATH)","--mode=kubelet-registration-probe"]},"failureThreshold":3,"initialDelaySeconds":60,"periodSeconds":10,"successThreshold":1,"timeoutSeconds":30},"name":"node-driver-registrar","resources":{"limits":{"memory":"200Mi"},"requests":{"cpu":"10m"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"C:\\var\\lib\\kubelet","name":"kubelet-dir"},{"mountPath":"C:\\csi","name":"plugin-dir"},{"mountPath":"C:\\registration","name":"registration-dir"}]},{"args":["--v=5","--endpoint=$(CSI_ENDPOINT)","--nodeid=$(KUBE_NODE_NAME)","--metrics-address=0.0.0.0:29605"],"env":[{"name":"AZURE_CREDENTIAL_FILE","value":"C:\\k\\azure.json"},{"name":"CSI_ENDPOINT","value":"unix://C:\\\\csi\\\\csi.sock"},{"name":"KUBE_NODE_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"spec.nodeName"}}}],"image":"mcr.microsoft.com/oss/kubernetes-csi/azuredisk-csi:v1.19.0","imagePullPolicy":"IfNotPresent","livenessProbe":{"failureThreshold":5,"httpGet":{"path":"/healthz","port":"healthz","scheme":"HTTP"},"initialDelaySeconds":30,"periodSeconds":30,"successThreshold":1,"timeoutSeconds":10},"name":"azuredisk","ports":[{"containerPort":29603,"name":"healthz","protocol":"TCP"}],"resources":{"limits":{"memory":"400Mi"},"requests":{"cpu":"10m"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"C:\\var\\lib\\kubelet","name":"kubelet-dir"},{"mountPath":"C:\\csi","name":"plugin-dir"},{"mountPath":"C:\\k","name":"azure-config"},{"mountPath":"\\\\.\\pipe\\csi-proxy-filesystem-v1","name":"csi-proxy-fs-pipe-v1"},{"mountPath":"\\\\.\\pipe\\csi-proxy-disk-v1","name":"csi-proxy-disk-pipe-v1"},{"mountPath":"\\\\.\\pipe\\csi-proxy-volume-v1","name":"csi-proxy-volume-pipe-v1"},{"mountPath":"\\\\.\\pipe\\csi-proxy-filesystem-v1beta1","name":"csi-proxy-fs-pipe-v1beta1"},{"mountPath":"\\\\.\\pipe\\csi-proxy-disk-v1beta2","name":"csi-proxy-disk-pipe-v1beta2"},{"mountPath":"\\\\.\\pipe\\csi-proxy-volume-v1beta2","name":"csi-proxy-volume-pipe-v1beta2"}]}],"dnsPolicy":"ClusterFirst","priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"csi-azuredisk-node-sa","serviceAccountName":"csi-azuredisk-node-sa","terminationGracePeriodSeconds":30,"tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"effect":"NoExecute","operator":"Exists"},{"effect":"NoSchedule","operator":"Exists"}],"volumes":[{"hostPath":{"path":"\\\\.\\pipe\\csi-proxy-filesystem-v1","type":""},"name":"csi-proxy-fs-pipe-v1"},{"hostPath":{"path":"\\\\.\\pipe\\csi-proxy-disk-v1","type":""},"name":"csi-proxy-disk-pipe-v1"},{"hostPath":{"path":"\\\\.\\pipe\\csi-proxy-volume-v1","type":""},"name":"csi-proxy-volume-pipe-v1"},{"hostPath":{"path":"\\\\.\\pipe\\csi-proxy-filesystem-v1beta1","type":""},"name":"csi-proxy-fs-pipe-v1beta1"},{"hostPath":{"path":"\\\\.\\pipe\\csi-proxy-disk-v1beta2","type":""},"name":"csi-proxy-disk-pipe-v1beta2"},{"hostPath":{"path":"\\\\.\\pipe\\csi-proxy-volume-v1beta2","type":""},"name":"csi-proxy-volume-pipe-v1beta2"},{"hostPath":{"path":"C:\\var\\lib\\kubelet\\plugins_registry\\","type":"Directory"},"name":"registration-dir"},{"hostPath":{"path":"C:\\var\\lib\\kubelet\\","type":"Directory"},"name":"kubelet-dir"},{"hostPath":{"path":"C:\\var\\lib\\kubelet\\plugins\\disk.csi.azure.com\\","type":"DirectoryOrCreate"},"name":"plugin-dir"},{"hostPath":{"path":"C:\\k","type":"DirectoryOrCreate"},"name":"azure-config"}]}}}},"kind":"ControllerRevision","metadata":{"annotations":{"deprecated.daemonset.template.generation":"1","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"addonmanager.kubernetes.io/mode\":\"Reconcile\",\"kubernetes.io/cluster-service\":\"true\"},\"name\":\"csi-azuredisk-node-win\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"app\":\"csi-azuredisk-node-win\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"csi-azuredisk-node-win\"}},\"spec\":{\"affinity\":{\"nodeAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":{\"nodeSelectorTerms\":[{\"matchExpressions\":[{\"key\":\"kubernetes.azure.com/cluster\",\"operator\":\"Exists\"},{\"key\":\"type\",\"operator\":\"NotIn\",\"values\":[\"virtual-kubelet\"]},{\"key\":\"kubernetes.io/os\",\"operator\":\"In\",\"values\":[\"windows\"]}]}]}}},\"containers\":[{\"args\":[\"--csi-address=$(CSI_ENDPOINT)\",\"--probe-timeout=3s\",\"--health-port=29603\",\"--v=2\"],\"env\":[{\"name\":\"CSI_ENDPOINT\",\"value\":\"unix://C:\\\\\\\\csi\\\\\\\\csi.sock\"}],\"image\":\"mcr.microsoft.com/oss/kubernetes-csi/livenessprobe:v2.6.0\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"liveness-probe\",\"resources\":{\"limits\":{\"memory\":\"200Mi\"},\"requests\":{\"cpu\":\"10m\"}},\"volumeMounts\":[{\"mountPath\":\"C:\\\\csi\",\"name\":\"plugin-dir\"}]},{\"args\":[\"--v=2\",\"--csi-address=$(CSI_ENDPOINT)\",\"--kubelet-registration-path=$(DRIVER_REG_SOCK_PATH)\"],\"env\":[{\"name\":\"CSI_ENDPOINT\",\"value\":\"unix://C:\\\\\\\\csi\\\\\\\\csi.sock\"},{\"name\":\"DRIVER_REG_SOCK_PATH\",\"value\":\"C:\\\\\\\\var\\\\\\\\lib\\\\\\\\kubelet\\\\\\\\plugins\\\\\\\\disk.csi.azure.com\\\\\\\\csi.sock\"},{\"name\":\"KUBE_NODE_NAME\",\"valueFrom\":{\"fieldRef\":{\"fieldPath\":\"spec.nodeName\"}}}],\"image\":\"mcr.microsoft.com/oss/kubernetes-csi/csi-node-driver-registrar:v2.5.0\",\"imagePullPolicy\":\"IfNotPresent\",\"livenessProbe\":{\"exec\":{\"command\":[\"/csi-node-driver-registrar.exe\",\"--kubelet-registration-path=$(DRIVER_REG_SOCK_PATH)\",\"--mode=kubelet-registration-probe\"]},\"initialDelaySeconds\":60,\"timeoutSeconds\":30},\"name\":\"node-driver-registrar\",\"resources\":{\"limits\":{\"memory\":\"200Mi\"},\"requests\":{\"cpu\":\"10m\"}},\"volumeMounts\":[{\"mountPath\":\"C:\\\\var\\\\lib\\\\kubelet\",\"name\":\"kubelet-dir\"},{\"mountPath\":\"C:\\\\csi\",\"name\":\"plugin-dir\"},{\"mountPath\":\"C:\\\\registration\",\"name\":\"registration-dir\"}]},{\"args\":[\"--v=5\",\"--endpoint=$(CSI_ENDPOINT)\",\"--nodeid=$(KUBE_NODE_NAME)\",\"--metrics-address=0.0.0.0:29605\"],\"env\":[{\"name\":\"AZURE_CREDENTIAL_FILE\",\"value\":\"C:\\\\k\\\\azure.json\"},{\"name\":\"CSI_ENDPOINT\",\"value\":\"unix://C:\\\\\\\\csi\\\\\\\\csi.sock\"},{\"name\":\"KUBE_NODE_NAME\",\"valueFrom\":{\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"spec.nodeName\"}}}],\"image\":\"mcr.microsoft.com/oss/kubernetes-csi/azuredisk-csi:v1.19.0\",\"imagePullPolicy\":\"IfNotPresent\",\"livenessProbe\":{\"failureThreshold\":5,\"httpGet\":{\"path\":\"/healthz\",\"port\":\"healthz\"},\"initialDelaySeconds\":30,\"periodSeconds\":30,\"timeoutSeconds\":10},\"name\":\"azuredisk\",\"ports\":[{\"containerPort\":29603,\"name\":\"healthz\",\"protocol\":\"TCP\"}],\"resources\":{\"limits\":{\"memory\":\"400Mi\"},\"requests\":{\"cpu\":\"10m\"}},\"volumeMounts\":[{\"mountPath\":\"C:\\\\var\\\\lib\\\\kubelet\",\"name\":\"kubelet-dir\"},{\"mountPath\":\"C:\\\\csi\",\"name\":\"plugin-dir\"},{\"mountPath\":\"C:\\\\k\",\"name\":\"azure-config\"},{\"mountPath\":\"\\\\\\\\.\\\\pipe\\\\csi-proxy-filesystem-v1\",\"name\":\"csi-proxy-fs-pipe-v1\"},{\"mountPath\":\"\\\\\\\\.\\\\pipe\\\\csi-proxy-disk-v1\",\"name\":\"csi-proxy-disk-pipe-v1\"},{\"mountPath\":\"\\\\\\\\.\\\\pipe\\\\csi-proxy-volume-v1\",\"name\":\"csi-proxy-volume-pipe-v1\"},{\"mountPath\":\"\\\\\\\\.\\\\pipe\\\\csi-proxy-filesystem-v1beta1\",\"name\":\"csi-proxy-fs-pipe-v1beta1\"},{\"mountPath\":\"\\\\\\\\.\\\\pipe\\\\csi-proxy-disk-v1beta2\",\"name\":\"csi-proxy-disk-pipe-v1beta2\"},{\"mountPath\":\"\\\\\\\\.\\\\pipe\\\\csi-proxy-volume-v1beta2\",\"name\":\"csi-proxy-volume-pipe-v1beta2\"}]}],\"priorityClassName\":\"system-node-critical\",\"serviceAccountName\":\"csi-azuredisk-node-sa\",\"tolerations\":[{\"key\":\"CriticalAddonsOnly\",\"operator\":\"Exists\"},{\"effect\":\"NoExecute\",\"operator\":\"Exists\"},{\"effect\":\"NoSchedule\",\"operator\":\"Exists\"}],\"volumes\":[{\"hostPath\":{\"path\":\"\\\\\\\\.\\\\pipe\\\\csi-proxy-filesystem-v1\"},\"name\":\"csi-proxy-fs-pipe-v1\"},{\"hostPath\":{\"path\":\"\\\\\\\\.\\\\pipe\\\\csi-proxy-disk-v1\"},\"name\":\"csi-proxy-disk-pipe-v1\"},{\"hostPath\":{\"path\":\"\\\\\\\\.\\\\pipe\\\\csi-proxy-volume-v1\"},\"name\":\"csi-proxy-volume-pipe-v1\"},{\"hostPath\":{\"path\":\"\\\\\\\\.\\\\pipe\\\\csi-proxy-filesystem-v1beta1\"},\"name\":\"csi-proxy-fs-pipe-v1beta1\"},{\"hostPath\":{\"path\":\"\\\\\\\\.\\\\pipe\\\\csi-proxy-disk-v1beta2\"},\"name\":\"csi-proxy-disk-pipe-v1beta2\"},{\"hostPath\":{\"path\":\"\\\\\\\\.\\\\pipe\\\\csi-proxy-volume-v1beta2\"},\"name\":\"csi-proxy-volume-pipe-v1beta2\"},{\"hostPath\":{\"path\":\"C:\\\\var\\\\lib\\\\kubelet\\\\plugins_registry\\\\\",\"type\":\"Directory\"},\"name\":\"registration-dir\"},{\"hostPath\":{\"path\":\"C:\\\\var\\\\lib\\\\kubelet\\\\\",\"type\":\"Directory\"},\"name\":\"kubelet-dir\"},{\"hostPath\":{\"path\":\"C:\\\\var\\\\lib\\\\kubelet\\\\plugins\\\\disk.csi.azure.com\\\\\",\"type\":\"DirectoryOrCreate\"},\"name\":\"plugin-dir\"},{\"hostPath\":{\"path\":\"C:\\\\k\",\"type\":\"DirectoryOrCreate\"},\"name\":\"azure-config\"}]}}}}\n"},"creationTimestamp":"2022-07-23T14:09:43Z","labels":{"app":"csi-azuredisk-node-win","controller-revision-hash":"5fc7b66454"},"name":"csi-azuredisk-node-win-5fc7b66454","namespace":"kube-system","ownerReferences":[{"apiVersion":"apps/v1","blockOwnerDeletion":true,"controller":true,"kind":"DaemonSet","name":"csi-azuredisk-node-win","uid":"95cd4ddb-6cf1-40d2-9397-343855191b38"}],"resourceVersion":"483","uid":"39ca5b46-7144-4cda-a7ed-74abc09b0901"},"revision":1},{"apiVersion":"apps/v1","data":{"spec":{"template":{"$patch":"replace","metadata":{"creationTimestamp":null,"labels":{"app":"csi-azurefile-node"}},"spec":{"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchExpressions":[{"key":"kubernetes.azure.com/cluster","operator":"Exists"},{"key":"type","operator":"NotIn","values":["virtual-kubelet"]},{"key":"kubernetes.io/os","operator":"In","values":["linux"]}]}]}}},"containers":[{"args":["--csi-address=/csi/csi.sock","--probe-timeout=3s","--health-port=29613","--v=2"],"image":"mcr.microsoft.com/oss/kubernetes-csi/livenessprobe:v2.6.0","imagePullPolicy":"IfNotPresent","name":"liveness-probe","resources":{"limits":{"memory":"100Mi"},"requests":{"cpu":"10m","memory":"20Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/csi","name":"socket-dir"}]},{"args":["--csi-address=$(ADDRESS)","--kubelet-registration-path=$(DRIVER_REG_SOCK_PATH)","--v=2"],"env":[{"name":"ADDRESS","value":"/csi/csi.sock"},{"name":"DRIVER_REG_SOCK_PATH","value":"/var/lib/kubelet/plugins/file.csi.azure.com/csi.sock"}],"image":"mcr.microsoft.com/oss/kubernetes-csi/csi-node-driver-registrar:v2.5.0","imagePullPolicy":"IfNotPresent","livenessProbe":{"exec":{"command":["/csi-node-driver-registrar","--kubelet-registration-path=$(DRIVER_REG_SOCK_PATH)","--mode=kubelet-registration-probe"]},"failureThreshold":3,"initialDelaySeconds":60,"periodSeconds":10,"successThreshold":1,"timeoutSeconds":30},"name":"node-driver-registrar","resources":{"limits":{"memory":"100Mi"},"requests":{"cpu":"10m","memory":"20Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/csi","name":"socket-dir"},{"mountPath":"/registration","name":"registration-dir"}]},{"args":["--v=2","--endpoint=$(CSI_ENDPOINT)","--nodeid=$(KUBE_NODE_NAME)","--metrics-address=0.0.0.0:29615","--enable-get-volume-stats=true","--mount-permissions=0777"],"env":[{"name":"AZURE_CREDENTIAL_FILE","value":"/etc/kubernetes/azure.json"},{"name":"CSI_ENDPOINT","value":"unix:///csi/csi.sock"},{"name":"KUBE_NODE_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"spec.nodeName"}}}],"image":"mcr.microsoft.com/oss/kubernetes-csi/azurefile-csi:v1.19.0","imagePullPolicy":"IfNotPresent","livenessProbe":{"failureThreshold":5,"httpGet":{"path":"/healthz","port":"healthz","scheme":"HTTP"},"initialDelaySeconds":30,"periodSeconds":30,"successThreshold":1,"timeoutSeconds":10},"name":"azurefile","ports":[{"containerPort":29613,"hostPort":29613,"name":"healthz","protocol":"TCP"}],"resources":{"limits":{"memory":"400Mi"},"requests":{"cpu":"10m","memory":"20Mi"}},"securityContext":{"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/csi","name":"socket-dir"},{"mountPath":"/var/lib/kubelet/","mountPropagation":"Bidirectional","name":"mountpoint-dir"},{"mountPath":"/etc/kubernetes/","name":"azure-cred"},{"mountPath":"/dev","name":"device-dir"}]}],"dnsPolicy":"Default","hostNetwork":true,"priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"csi-azurefile-node-sa","serviceAccountName":"csi-azurefile-node-sa","terminationGracePeriodSeconds":30,"tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"effect":"NoExecute","operator":"Exists"},{"effect":"NoSchedule","operator":"Exists"}],"volumes":[{"hostPath":{"path":"/var/lib/kubelet/plugins/file.csi.azure.com","type":"DirectoryOrCreate"},"name":"socket-dir"},{"hostPath":{"path":"/var/lib/kubelet/","type":"DirectoryOrCreate"},"name":"mountpoint-dir"},{"hostPath":{"path":"/var/lib/kubelet/plugins_registry/","type":"DirectoryOrCreate"},"name":"registration-dir"},{"hostPath":{"path":"/etc/kubernetes/","type":"DirectoryOrCreate"},"name":"azure-cred"},{"hostPath":{"path":"/dev","type":"Directory"},"name":"device-dir"}]}}}},"kind":"ControllerRevision","metadata":{"annotations":{"deprecated.daemonset.template.generation":"1","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"addonmanager.kubernetes.io/mode\":\"Reconcile\",\"kubernetes.io/cluster-service\":\"true\"},\"name\":\"csi-azurefile-node\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"app\":\"csi-azurefile-node\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"csi-azurefile-node\"}},\"spec\":{\"affinity\":{\"nodeAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":{\"nodeSelectorTerms\":[{\"matchExpressions\":[{\"key\":\"kubernetes.azure.com/cluster\",\"operator\":\"Exists\"},{\"key\":\"type\",\"operator\":\"NotIn\",\"values\":[\"virtual-kubelet\"]},{\"key\":\"kubernetes.io/os\",\"operator\":\"In\",\"values\":[\"linux\"]}]}]}}},\"containers\":[{\"args\":[\"--csi-address=/csi/csi.sock\",\"--probe-timeout=3s\",\"--health-port=29613\",\"--v=2\"],\"image\":\"mcr.microsoft.com/oss/kubernetes-csi/livenessprobe:v2.6.0\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"liveness-probe\",\"resources\":{\"limits\":{\"memory\":\"100Mi\"},\"requests\":{\"cpu\":\"10m\",\"memory\":\"20Mi\"}},\"volumeMounts\":[{\"mountPath\":\"/csi\",\"name\":\"socket-dir\"}]},{\"args\":[\"--csi-address=$(ADDRESS)\",\"--kubelet-registration-path=$(DRIVER_REG_SOCK_PATH)\",\"--v=2\"],\"env\":[{\"name\":\"ADDRESS\",\"value\":\"/csi/csi.sock\"},{\"name\":\"DRIVER_REG_SOCK_PATH\",\"value\":\"/var/lib/kubelet/plugins/file.csi.azure.com/csi.sock\"}],\"image\":\"mcr.microsoft.com/oss/kubernetes-csi/csi-node-driver-registrar:v2.5.0\",\"imagePullPolicy\":\"IfNotPresent\",\"livenessProbe\":{\"exec\":{\"command\":[\"/csi-node-driver-registrar\",\"--kubelet-registration-path=$(DRIVER_REG_SOCK_PATH)\",\"--mode=kubelet-registration-probe\"]},\"initialDelaySeconds\":60,\"timeoutSeconds\":30},\"name\":\"node-driver-registrar\",\"resources\":{\"limits\":{\"memory\":\"100Mi\"},\"requests\":{\"cpu\":\"10m\",\"memory\":\"20Mi\"}},\"volumeMounts\":[{\"mountPath\":\"/csi\",\"name\":\"socket-dir\"},{\"mountPath\":\"/registration\",\"name\":\"registration-dir\"}]},{\"args\":[\"--v=2\",\"--endpoint=$(CSI_ENDPOINT)\",\"--nodeid=$(KUBE_NODE_NAME)\",\"--metrics-address=0.0.0.0:29615\",\"--enable-get-volume-stats=true\",\"--mount-permissions=0777\"],\"env\":[{\"name\":\"AZURE_CREDENTIAL_FILE\",\"value\":\"/etc/kubernetes/azure.json\"},{\"name\":\"CSI_ENDPOINT\",\"value\":\"unix:///csi/csi.sock\"},{\"name\":\"KUBE_NODE_NAME\",\"valueFrom\":{\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"spec.nodeName\"}}}],\"image\":\"mcr.microsoft.com/oss/kubernetes-csi/azurefile-csi:v1.19.0\",\"imagePullPolicy\":\"IfNotPresent\",\"livenessProbe\":{\"failureThreshold\":5,\"httpGet\":{\"path\":\"/healthz\",\"port\":\"healthz\"},\"initialDelaySeconds\":30,\"periodSeconds\":30,\"timeoutSeconds\":10},\"name\":\"azurefile\",\"ports\":[{\"containerPort\":29613,\"name\":\"healthz\",\"protocol\":\"TCP\"}],\"resources\":{\"limits\":{\"memory\":\"400Mi\"},\"requests\":{\"cpu\":\"10m\",\"memory\":\"20Mi\"}},\"securityContext\":{\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/csi\",\"name\":\"socket-dir\"},{\"mountPath\":\"/var/lib/kubelet/\",\"mountPropagation\":\"Bidirectional\",\"name\":\"mountpoint-dir\"},{\"mountPath\":\"/etc/kubernetes/\",\"name\":\"azure-cred\"},{\"mountPath\":\"/dev\",\"name\":\"device-dir\"}]}],\"dnsPolicy\":\"Default\",\"hostNetwork\":true,\"priorityClassName\":\"system-node-critical\",\"serviceAccountName\":\"csi-azurefile-node-sa\",\"tolerations\":[{\"key\":\"CriticalAddonsOnly\",\"operator\":\"Exists\"},{\"effect\":\"NoExecute\",\"operator\":\"Exists\"},{\"effect\":\"NoSchedule\",\"operator\":\"Exists\"}],\"volumes\":[{\"hostPath\":{\"path\":\"/var/lib/kubelet/plugins/file.csi.azure.com\",\"type\":\"DirectoryOrCreate\"},\"name\":\"socket-dir\"},{\"hostPath\":{\"path\":\"/var/lib/kubelet/\",\"type\":\"DirectoryOrCreate\"},\"name\":\"mountpoint-dir\"},{\"hostPath\":{\"path\":\"/var/lib/kubelet/plugins_registry/\",\"type\":\"DirectoryOrCreate\"},\"name\":\"registration-dir\"},{\"hostPath\":{\"path\":\"/etc/kubernetes/\",\"type\":\"DirectoryOrCreate\"},\"name\":\"azure-cred\"},{\"hostPath\":{\"path\":\"/dev\",\"type\":\"Directory\"},\"name\":\"device-dir\"}]}}}}\n"},"creationTimestamp":"2022-07-23T14:09:43Z","labels":{"app":"csi-azurefile-node","controller-revision-hash":"6775b679f9"},"name":"csi-azurefile-node-6775b679f9","namespace":"kube-system","ownerReferences":[{"apiVersion":"apps/v1","blockOwnerDeletion":true,"controller":true,"kind":"DaemonSet","name":"csi-azurefile-node","uid":"91b68c4d-d851-4238-91bc-3587de4d0dd2"}],"resourceVersion":"487","uid":"dbbea764-09d4-4d86-b8b3-ef74d2c81592"},"revision":1},{"apiVersion":"apps/v1","data":{"spec":{"template":{"$patch":"replace","metadata":{"creationTimestamp":null,"labels":{"app":"csi-azurefile-node-win"}},"spec":{"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchExpressions":[{"key":"kubernetes.azure.com/cluster","operator":"Exists"},{"key":"type","operator":"NotIn","values":["virtual-kubelet"]},{"key":"kubernetes.io/os","operator":"In","values":["windows"]}]}]}}},"containers":[{"args":["--csi-address=$(CSI_ENDPOINT)","--probe-timeout=3s","--health-port=29613","--v=2"],"env":[{"name":"CSI_ENDPOINT","value":"unix://C:\\\\csi\\\\csi.sock"}],"image":"mcr.microsoft.com/oss/kubernetes-csi/livenessprobe:v2.6.0","imagePullPolicy":"IfNotPresent","name":"liveness-probe","resources":{"limits":{"memory":"200Mi"},"requests":{"cpu":"10m"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"C:\\csi","name":"plugin-dir"}]},{"args":["--csi-address=$(CSI_ENDPOINT)","--kubelet-registration-path=$(DRIVER_REG_SOCK_PATH)","--v=2"],"env":[{"name":"CSI_ENDPOINT","value":"unix://C:\\\\csi\\\\csi.sock"},{"name":"DRIVER_REG_SOCK_PATH","value":"C:\\\\var\\\\lib\\\\kubelet\\\\plugins\\\\file.csi.azure.com\\\\csi.sock"},{"name":"KUBE_NODE_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"spec.nodeName"}}}],"image":"mcr.microsoft.com/oss/kubernetes-csi/csi-node-driver-registrar:v2.5.0","imagePullPolicy":"IfNotPresent","livenessProbe":{"exec":{"command":["/csi-node-driver-registrar.exe","--kubelet-registration-path=$(DRIVER_REG_SOCK_PATH)","--mode=kubelet-registration-probe"]},"failureThreshold":3,"initialDelaySeconds":60,"periodSeconds":10,"successThreshold":1,"timeoutSeconds":30},"name":"node-driver-registrar","resources":{"limits":{"memory":"200Mi"},"requests":{"cpu":"10m"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"C:\\var\\lib\\kubelet","name":"kubelet-dir"},{"mountPath":"C:\\csi","name":"plugin-dir"},{"mountPath":"C:\\registration","name":"registration-dir"}]},{"args":["--v=5","--endpoint=$(CSI_ENDPOINT)","--nodeid=$(KUBE_NODE_NAME)","--metrics-address=0.0.0.0:29615","--kubeconfig=C:\\k\\config"],"env":[{"name":"AZURE_CREDENTIAL_FILE","value":"C:\\k\\azure.json"},{"name":"CSI_ENDPOINT","value":"unix://C:\\\\csi\\\\csi.sock"},{"name":"KUBE_NODE_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"spec.nodeName"}}}],"image":"mcr.microsoft.com/oss/kubernetes-csi/azurefile-csi:v1.19.0","imagePullPolicy":"IfNotPresent","livenessProbe":{"failureThreshold":5,"httpGet":{"path":"/healthz","port":"healthz","scheme":"HTTP"},"initialDelaySeconds":30,"periodSeconds":30,"successThreshold":1,"timeoutSeconds":10},"name":"azurefile","ports":[{"containerPort":29613,"name":"healthz","protocol":"TCP"}],"resources":{"limits":{"memory":"400Mi"},"requests":{"cpu":"10m"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"C:\\var\\lib\\kubelet","name":"kubelet-dir"},{"mountPath":"C:\\csi","name":"plugin-dir"},{"mountPath":"C:\\k","name":"azure-config"},{"mountPath":"\\\\.\\pipe\\csi-proxy-filesystem-v1","name":"csi-proxy-fs-pipe-v1"},{"mountPath":"\\\\.\\pipe\\csi-proxy-smb-v1","name":"csi-proxy-smb-pipe-v1"},{"mountPath":"\\\\.\\pipe\\csi-proxy-filesystem-v1beta1","name":"csi-proxy-fs-pipe-v1beta1"},{"mountPath":"\\\\.\\pipe\\csi-proxy-smb-v1beta1","name":"csi-proxy-smb-pipe-v1beta1"}]}],"dnsPolicy":"ClusterFirst","priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"csi-azurefile-node-sa","serviceAccountName":"csi-azurefile-node-sa","terminationGracePeriodSeconds":30,"tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"effect":"NoExecute","operator":"Exists"},{"effect":"NoSchedule","operator":"Exists"}],"volumes":[{"hostPath":{"path":"\\\\.\\pipe\\csi-proxy-filesystem-v1","type":""},"name":"csi-proxy-fs-pipe-v1"},{"hostPath":{"path":"\\\\.\\pipe\\csi-proxy-smb-v1","type":""},"name":"csi-proxy-smb-pipe-v1"},{"hostPath":{"path":"\\\\.\\pipe\\csi-proxy-filesystem-v1beta1","type":""},"name":"csi-proxy-fs-pipe-v1beta1"},{"hostPath":{"path":"\\\\.\\pipe\\csi-proxy-smb-v1beta1","type":""},"name":"csi-proxy-smb-pipe-v1beta1"},{"hostPath":{"path":"C:\\var\\lib\\kubelet\\plugins_registry\\","type":"Directory"},"name":"registration-dir"},{"hostPath":{"path":"C:\\var\\lib\\kubelet\\","type":"Directory"},"name":"kubelet-dir"},{"hostPath":{"path":"C:\\var\\lib\\kubelet\\plugins\\file.csi.azure.com\\","type":"DirectoryOrCreate"},"name":"plugin-dir"},{"hostPath":{"path":"C:\\k","type":"DirectoryOrCreate"},"name":"azure-config"}]}}}},"kind":"ControllerRevision","metadata":{"annotations":{"deprecated.daemonset.template.generation":"1","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"addonmanager.kubernetes.io/mode\":\"Reconcile\",\"kubernetes.io/cluster-service\":\"true\"},\"name\":\"csi-azurefile-node-win\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"app\":\"csi-azurefile-node-win\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"csi-azurefile-node-win\"}},\"spec\":{\"affinity\":{\"nodeAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":{\"nodeSelectorTerms\":[{\"matchExpressions\":[{\"key\":\"kubernetes.azure.com/cluster\",\"operator\":\"Exists\"},{\"key\":\"type\",\"operator\":\"NotIn\",\"values\":[\"virtual-kubelet\"]},{\"key\":\"kubernetes.io/os\",\"operator\":\"In\",\"values\":[\"windows\"]}]}]}}},\"containers\":[{\"args\":[\"--csi-address=$(CSI_ENDPOINT)\",\"--probe-timeout=3s\",\"--health-port=29613\",\"--v=2\"],\"env\":[{\"name\":\"CSI_ENDPOINT\",\"value\":\"unix://C:\\\\\\\\csi\\\\\\\\csi.sock\"}],\"image\":\"mcr.microsoft.com/oss/kubernetes-csi/livenessprobe:v2.6.0\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"liveness-probe\",\"resources\":{\"limits\":{\"memory\":\"200Mi\"},\"requests\":{\"cpu\":\"10m\"}},\"volumeMounts\":[{\"mountPath\":\"C:\\\\csi\",\"name\":\"plugin-dir\"}]},{\"args\":[\"--csi-address=$(CSI_ENDPOINT)\",\"--kubelet-registration-path=$(DRIVER_REG_SOCK_PATH)\",\"--v=2\"],\"env\":[{\"name\":\"CSI_ENDPOINT\",\"value\":\"unix://C:\\\\\\\\csi\\\\\\\\csi.sock\"},{\"name\":\"DRIVER_REG_SOCK_PATH\",\"value\":\"C:\\\\\\\\var\\\\\\\\lib\\\\\\\\kubelet\\\\\\\\plugins\\\\\\\\file.csi.azure.com\\\\\\\\csi.sock\"},{\"name\":\"KUBE_NODE_NAME\",\"valueFrom\":{\"fieldRef\":{\"fieldPath\":\"spec.nodeName\"}}}],\"image\":\"mcr.microsoft.com/oss/kubernetes-csi/csi-node-driver-registrar:v2.5.0\",\"imagePullPolicy\":\"IfNotPresent\",\"livenessProbe\":{\"exec\":{\"command\":[\"/csi-node-driver-registrar.exe\",\"--kubelet-registration-path=$(DRIVER_REG_SOCK_PATH)\",\"--mode=kubelet-registration-probe\"]},\"initialDelaySeconds\":60,\"timeoutSeconds\":30},\"name\":\"node-driver-registrar\",\"resources\":{\"limits\":{\"memory\":\"200Mi\"},\"requests\":{\"cpu\":\"10m\"}},\"volumeMounts\":[{\"mountPath\":\"C:\\\\var\\\\lib\\\\kubelet\",\"name\":\"kubelet-dir\"},{\"mountPath\":\"C:\\\\csi\",\"name\":\"plugin-dir\"},{\"mountPath\":\"C:\\\\registration\",\"name\":\"registration-dir\"}]},{\"args\":[\"--v=5\",\"--endpoint=$(CSI_ENDPOINT)\",\"--nodeid=$(KUBE_NODE_NAME)\",\"--metrics-address=0.0.0.0:29615\",\"--kubeconfig=C:\\\\k\\\\config\"],\"env\":[{\"name\":\"AZURE_CREDENTIAL_FILE\",\"value\":\"C:\\\\k\\\\azure.json\"},{\"name\":\"CSI_ENDPOINT\",\"value\":\"unix://C:\\\\\\\\csi\\\\\\\\csi.sock\"},{\"name\":\"KUBE_NODE_NAME\",\"valueFrom\":{\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"spec.nodeName\"}}}],\"image\":\"mcr.microsoft.com/oss/kubernetes-csi/azurefile-csi:v1.19.0\",\"imagePullPolicy\":\"IfNotPresent\",\"livenessProbe\":{\"failureThreshold\":5,\"httpGet\":{\"path\":\"/healthz\",\"port\":\"healthz\"},\"initialDelaySeconds\":30,\"periodSeconds\":30,\"timeoutSeconds\":10},\"name\":\"azurefile\",\"ports\":[{\"containerPort\":29613,\"name\":\"healthz\",\"protocol\":\"TCP\"}],\"resources\":{\"limits\":{\"memory\":\"400Mi\"},\"requests\":{\"cpu\":\"10m\"}},\"volumeMounts\":[{\"mountPath\":\"C:\\\\var\\\\lib\\\\kubelet\",\"name\":\"kubelet-dir\"},{\"mountPath\":\"C:\\\\csi\",\"name\":\"plugin-dir\"},{\"mountPath\":\"C:\\\\k\",\"name\":\"azure-config\"},{\"mountPath\":\"\\\\\\\\.\\\\pipe\\\\csi-proxy-filesystem-v1\",\"name\":\"csi-proxy-fs-pipe-v1\"},{\"mountPath\":\"\\\\\\\\.\\\\pipe\\\\csi-proxy-smb-v1\",\"name\":\"csi-proxy-smb-pipe-v1\"},{\"mountPath\":\"\\\\\\\\.\\\\pipe\\\\csi-proxy-filesystem-v1beta1\",\"name\":\"csi-proxy-fs-pipe-v1beta1\"},{\"mountPath\":\"\\\\\\\\.\\\\pipe\\\\csi-proxy-smb-v1beta1\",\"name\":\"csi-proxy-smb-pipe-v1beta1\"}]}],\"priorityClassName\":\"system-node-critical\",\"serviceAccountName\":\"csi-azurefile-node-sa\",\"tolerations\":[{\"key\":\"CriticalAddonsOnly\",\"operator\":\"Exists\"},{\"effect\":\"NoExecute\",\"operator\":\"Exists\"},{\"effect\":\"NoSchedule\",\"operator\":\"Exists\"}],\"volumes\":[{\"hostPath\":{\"path\":\"\\\\\\\\.\\\\pipe\\\\csi-proxy-filesystem-v1\"},\"name\":\"csi-proxy-fs-pipe-v1\"},{\"hostPath\":{\"path\":\"\\\\\\\\.\\\\pipe\\\\csi-proxy-smb-v1\"},\"name\":\"csi-proxy-smb-pipe-v1\"},{\"hostPath\":{\"path\":\"\\\\\\\\.\\\\pipe\\\\csi-proxy-filesystem-v1beta1\"},\"name\":\"csi-proxy-fs-pipe-v1beta1\"},{\"hostPath\":{\"path\":\"\\\\\\\\.\\\\pipe\\\\csi-proxy-smb-v1beta1\"},\"name\":\"csi-proxy-smb-pipe-v1beta1\"},{\"hostPath\":{\"path\":\"C:\\\\var\\\\lib\\\\kubelet\\\\plugins_registry\\\\\",\"type\":\"Directory\"},\"name\":\"registration-dir\"},{\"hostPath\":{\"path\":\"C:\\\\var\\\\lib\\\\kubelet\\\\\",\"type\":\"Directory\"},\"name\":\"kubelet-dir\"},{\"hostPath\":{\"path\":\"C:\\\\var\\\\lib\\\\kubelet\\\\plugins\\\\file.csi.azure.com\\\\\",\"type\":\"DirectoryOrCreate\"},\"name\":\"plugin-dir\"},{\"hostPath\":{\"path\":\"C:\\\\k\",\"type\":\"DirectoryOrCreate\"},\"name\":\"azure-config\"}]}}}}\n"},"creationTimestamp":"2022-07-23T14:09:43Z","labels":{"app":"csi-azurefile-node-win","controller-revision-hash":"65db6d6d9b"},"name":"csi-azurefile-node-win-65db6d6d9b","namespace":"kube-system","ownerReferences":[{"apiVersion":"apps/v1","blockOwnerDeletion":true,"controller":true,"kind":"DaemonSet","name":"csi-azurefile-node-win","uid":"72e127a9-3f7f-4eb2-b68c-5c682c9620e9"}],"resourceVersion":"495","uid":"ca658a54-086e-42eb-a6a8-0d80716fe9ca"},"revision":1},{"apiVersion":"apps/v1","data":{"spec":{"template":{"$patch":"replace","metadata":{"creationTimestamp":null,"labels":{"component":"kube-proxy","tier":"node"}},"spec":{"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchExpressions":[{"key":"kubernetes.azure.com/cluster","operator":"Exists"},{"key":"type","operator":"NotIn","values":["virtual-kubelet"]},{"key":"kubernetes.io/os","operator":"In","values":["linux"]}]}]}}},"containers":[{"command":["kube-proxy","--metrics-bind-address=0.0.0.0:10249","--kubeconfig=/var/lib/kubelet/kubeconfig","--cluster-cidr=10.244.0.0/16","--detect-local-mode=ClusterCIDR","--pod-interface-name-prefix=","--v=3"],"image":"mcr.microsoft.com/oss/kubernetes/kube-proxy:v1.23.8-hotfix.20220620.1","imagePullPolicy":"IfNotPresent","name":"kube-proxy","resources":{"requests":{"cpu":"100m"}},"securityContext":{"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/var/lib/kubelet","name":"kubeconfig","readOnly":true},{"mountPath":"/etc/kubernetes/certs","name":"certificates","readOnly":true},{"mountPath":"/run/xtables.lock","name":"iptableslock"}]}],"dnsPolicy":"ClusterFirst","hostNetwork":true,"priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"kube-proxy","serviceAccountName":"kube-proxy","terminationGracePeriodSeconds":30,"tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"effect":"NoExecute","operator":"Exists"},{"effect":"NoSchedule","operator":"Exists"}],"volumes":[{"hostPath":{"path":"/var/lib/kubelet","type":""},"name":"kubeconfig"},{"hostPath":{"path":"/etc/kubernetes/certs","type":""},"name":"certificates"},{"hostPath":{"path":"/run/xtables.lock","type":"FileOrCreate"},"name":"iptableslock"}]}}}},"kind":"ControllerRevision","metadata":{"annotations":{"deprecated.daemonset.template.generation":"1","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"addonmanager.kubernetes.io/mode\":\"Reconcile\",\"component\":\"kube-proxy\",\"tier\":\"node\"},\"name\":\"kube-proxy\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"component\":\"kube-proxy\",\"tier\":\"node\"}},\"template\":{\"metadata\":{\"annotations\":null,\"labels\":{\"component\":\"kube-proxy\",\"tier\":\"node\"}},\"spec\":{\"affinity\":{\"nodeAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":{\"nodeSelectorTerms\":[{\"labelSelector\":null,\"matchExpressions\":[{\"key\":\"kubernetes.azure.com/cluster\",\"operator\":\"Exists\"},{\"key\":\"type\",\"operator\":\"NotIn\",\"values\":[\"virtual-kubelet\"]},{\"key\":\"kubernetes.io/os\",\"operator\":\"In\",\"values\":[\"linux\"]}]}]}}},\"containers\":[{\"command\":[\"kube-proxy\",\"--metrics-bind-address=0.0.0.0:10249\",\"--kubeconfig=/var/lib/kubelet/kubeconfig\",\"--cluster-cidr=10.244.0.0/16\",\"--detect-local-mode=ClusterCIDR\",\"--pod-interface-name-prefix=\",\"--v=3\"],\"image\":\"mcr.microsoft.com/oss/kubernetes/kube-proxy:v1.23.8-hotfix.20220620.1\",\"name\":\"kube-proxy\",\"resources\":{\"requests\":{\"cpu\":\"100m\"}},\"securityContext\":{\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/var/lib/kubelet\",\"name\":\"kubeconfig\",\"readOnly\":true},{\"mountPath\":\"/etc/kubernetes/certs\",\"name\":\"certificates\",\"readOnly\":true},{\"mountPath\":\"/run/xtables.lock\",\"name\":\"iptableslock\"}]}],\"hostNetwork\":true,\"priorityClassName\":\"system-node-critical\",\"serviceAccountName\":\"kube-proxy\",\"tolerations\":[{\"key\":\"CriticalAddonsOnly\",\"operator\":\"Exists\"},{\"effect\":\"NoExecute\",\"operator\":\"Exists\"},{\"effect\":\"NoSchedule\",\"operator\":\"Exists\"}],\"volumes\":[{\"hostPath\":{\"path\":\"/var/lib/kubelet\"},\"name\":\"kubeconfig\"},{\"hostPath\":{\"path\":\"/etc/kubernetes/certs\"},\"name\":\"certificates\"},{\"hostPath\":{\"path\":\"/run/xtables.lock\",\"type\":\"FileOrCreate\"},\"name\":\"iptableslock\"}]}},\"updateStrategy\":{\"rollingUpdate\":{\"maxUnavailable\":1},\"type\":\"RollingUpdate\"}}}\n"},"creationTimestamp":"2022-07-23T14:09:43Z","labels":{"component":"kube-proxy","controller-revision-hash":"84588bb9d7","tier":"node"},"name":"kube-proxy-84588bb9d7","namespace":"kube-system","ownerReferences":[{"apiVersion":"apps/v1","blockOwnerDeletion":true,"controller":true,"kind":"DaemonSet","name":"kube-proxy","uid":"1a7fef5d-68d3-4414-9e15-49710b69e275"}],"resourceVersion":"551","uid":"e19c2377-67a2-4392-b68c-b5de21c319fa"},"revision":1},{"apiVersion":"apps/v1","data":{"spec":{"template":{"$patch":"replace","metadata":{"annotations":{"WSID":"MTNiZGRiOTctOTE1ZS00Zjg0LWJjOWMtNzRiMWE5ZmVhMmEz","agentVersion":"azure-mdsd-1.17.0","dockerProviderVersion":"18.0.1-0","kubernetes.azure.com/no-http-proxy-vars":"true","schema-versions":"v1"},"creationTimestamp":null,"labels":{"component":"oms-agent","kubernetes.azure.com/managedby":"aks","tier":"node"}},"spec":{"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchExpressions":[{"key":"beta.kubernetes.io/os","operator":"In","values":["linux"]},{"key":"kubernetes.azure.com/cluster","operator":"Exists"},{"key":"type","operator":"NotIn","values":["virtual-kubelet"]}]}]}}},"containers":[{"env":[{"name":"NODE_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}},{"name":"FBIT_SERVICE_FLUSH_INTERVAL","value":"15"},{"name":"FBIT_TAIL_BUFFER_CHUNK_SIZE","value":"1"},{"name":"FBIT_TAIL_BUFFER_MAX_SIZE","value":"1"},{"name":"AKS_CLUSTER_NAME","value":"sonobuoy-test"},{"name":"AKS_RESOURCE_ID","value":"/subscriptions/ce859648-30e1-4135-9d0f-8358aebfe789/resourceGroups/sonobuoy-te_group/providers/Microsoft.ContainerService/managedClusters/sonobuoy-test"},{"name":"AKS_NODE_RESOURCE_GROUP","value":"MC_sonobuoy-te_group_sonobuoy-test_canadacentral"},{"name":"AKS_REGION","value":"canadacentral"},{"name":"CONTROLLER_TYPE","value":"DaemonSet"},{"name":"USER_ASSIGNED_IDENTITY_CLIENT_ID","value":"a02c4905-04be-41ca-85b6-32d86766e758"},{"name":"AZMON_CONTAINERLOGS_ONEAGENT_REGIONS","value":"koreacentral,norwayeast,eastus2"},{"name":"USING_AAD_MSI_AUTH","value":"false"}],"image":"mcr.microsoft.com/azuremonitor/containerinsights/ciprod:ciprod06272022","imagePullPolicy":"IfNotPresent","livenessProbe":{"exec":{"command":["/bin/bash","-c","/opt/livenessprobe.sh"]},"failureThreshold":3,"initialDelaySeconds":60,"periodSeconds":60,"successThreshold":1,"timeoutSeconds":15},"name":"omsagent","ports":[{"containerPort":25225,"protocol":"TCP"},{"containerPort":25224,"protocol":"UDP"}],"resources":{"limits":{"cpu":"500m","memory":"750Mi"},"requests":{"cpu":"75m","memory":"325Mi"}},"securityContext":{"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/hostfs","name":"host-root","readOnly":true},{"mountPath":"/var/run/host","name":"docker-sock"},{"mountPath":"/var/log","name":"host-log"},{"mountPath":"/var/lib/docker/containers","name":"containerlog-path","readOnly":true},{"mountPath":"/mnt/docker","name":"containerlog-path-2","readOnly":true},{"mountPath":"/mnt/containers","name":"containerlog-path-3","readOnly":true},{"mountPath":"/etc/kubernetes/host","name":"azure-json-path"},{"mountPath":"/etc/omsagent-secret","name":"omsagent-secret","readOnly":true},{"mountPath":"/etc/config/settings","name":"settings-vol-config","readOnly":true},{"mountPath":"/etc/config/settings/adx","name":"omsagent-adx-secret","readOnly":true}]},{"env":[{"name":"NODE_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}},{"name":"AKS_CLUSTER_NAME","value":"sonobuoy-test"},{"name":"AKS_RESOURCE_ID","value":"/subscriptions/ce859648-30e1-4135-9d0f-8358aebfe789/resourceGroups/sonobuoy-te_group/providers/Microsoft.ContainerService/managedClusters/sonobuoy-test"},{"name":"AKS_NODE_RESOURCE_GROUP","value":"MC_sonobuoy-te_group_sonobuoy-test_canadacentral"},{"name":"AKS_REGION","value":"canadacentral"},{"name":"CONTROLLER_TYPE","value":"DaemonSet"},{"name":"CONTAINER_TYPE","value":"PrometheusSidecar"},{"name":"USER_ASSIGNED_IDENTITY_CLIENT_ID","value":"a02c4905-04be-41ca-85b6-32d86766e758"},{"name":"USING_AAD_MSI_AUTH","value":"false"}],"image":"mcr.microsoft.com/azuremonitor/containerinsights/ciprod:ciprod06272022","imagePullPolicy":"IfNotPresent","livenessProbe":{"exec":{"command":["/bin/bash","-c","/opt/livenessprobe.sh"]},"failureThreshold":3,"initialDelaySeconds":60,"periodSeconds":60,"successThreshold":1,"timeoutSeconds":15},"name":"omsagent-prometheus","resources":{"limits":{"cpu":"500m","memory":"1Gi"},"requests":{"cpu":"75m","memory":"225Mi"}},"securityContext":{"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/etc/kubernetes/host","name":"azure-json-path"},{"mountPath":"/etc/omsagent-secret","name":"omsagent-secret","readOnly":true},{"mountPath":"/etc/config/settings","name":"settings-vol-config","readOnly":true},{"mountPath":"/etc/config/osm-settings","name":"osm-settings-vol-config","readOnly":true}]}],"dnsConfig":{"options":[{"name":"ndots","value":"3"}]},"dnsPolicy":"ClusterFirst","priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"omsagent","serviceAccountName":"omsagent","terminationGracePeriodSeconds":30,"tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"effect":"NoExecute","operator":"Exists"},{"effect":"NoSchedule","operator":"Exists"},{"effect":"PreferNoSchedule","operator":"Exists"}],"volumes":[{"hostPath":{"path":"/","type":""},"name":"host-root"},{"hostPath":{"path":"/var/run","type":""},"name":"docker-sock"},{"hostPath":{"path":"/etc/hostname","type":""},"name":"container-hostname"},{"hostPath":{"path":"/var/log","type":""},"name":"host-log"},{"hostPath":{"path":"/var/lib/docker/containers","type":""},"name":"containerlog-path"},{"hostPath":{"path":"/mnt/docker","type":""},"name":"containerlog-path-2"},{"hostPath":{"path":"/mnt/containers","type":""},"name":"containerlog-path-3"},{"hostPath":{"path":"/etc/kubernetes","type":""},"name":"azure-json-path"},{"name":"omsagent-secret","secret":{"defaultMode":420,"secretName":"omsagent-secret"}},{"configMap":{"defaultMode":420,"name":"container-azm-ms-agentconfig","optional":true},"name":"settings-vol-config"},{"name":"omsagent-adx-secret","secret":{"defaultMode":420,"optional":true,"secretName":"omsagent-adx-secret"}},{"configMap":{"defaultMode":420,"name":"container-azm-ms-osmconfig","optional":true},"name":"osm-settings-vol-config"}]}}}},"kind":"ControllerRevision","metadata":{"annotations":{"deprecated.daemonset.template.generation":"1","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"addonmanager.kubernetes.io/mode\":\"Reconcile\",\"component\":\"oms-agent\",\"kubernetes.io/cluster-service\":\"true\",\"tier\":\"node\"},\"name\":\"omsagent\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"component\":\"oms-agent\",\"tier\":\"node\"}},\"template\":{\"metadata\":{\"annotations\":{\"WSID\":\"MTNiZGRiOTctOTE1ZS00Zjg0LWJjOWMtNzRiMWE5ZmVhMmEz\",\"agentVersion\":\"azure-mdsd-1.17.0\",\"dockerProviderVersion\":\"18.0.1-0\",\"kubernetes.azure.com/no-http-proxy-vars\":\"true\",\"schema-versions\":\"v1\"},\"labels\":{\"component\":\"oms-agent\",\"kubernetes.azure.com/managedby\":\"aks\",\"tier\":\"node\"}},\"spec\":{\"affinity\":{\"nodeAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":{\"nodeSelectorTerms\":[{\"matchExpressions\":[{\"key\":\"beta.kubernetes.io/os\",\"operator\":\"In\",\"values\":[\"linux\"]},{\"key\":\"kubernetes.azure.com/cluster\",\"operator\":\"Exists\"},{\"key\":\"type\",\"operator\":\"NotIn\",\"values\":[\"virtual-kubelet\"]}]}]}}},\"containers\":[{\"env\":[{\"name\":\"NODE_IP\",\"valueFrom\":{\"fieldRef\":{\"fieldPath\":\"status.hostIP\"}}},{\"name\":\"FBIT_SERVICE_FLUSH_INTERVAL\",\"value\":\"15\"},{\"name\":\"FBIT_TAIL_BUFFER_CHUNK_SIZE\",\"value\":\"1\"},{\"name\":\"FBIT_TAIL_BUFFER_MAX_SIZE\",\"value\":\"1\"},{\"name\":\"AKS_CLUSTER_NAME\",\"value\":\"sonobuoy-test\"},{\"name\":\"AKS_RESOURCE_ID\",\"value\":\"/subscriptions/ce859648-30e1-4135-9d0f-8358aebfe789/resourceGroups/sonobuoy-te_group/providers/Microsoft.ContainerService/managedClusters/sonobuoy-test\"},{\"name\":\"AKS_NODE_RESOURCE_GROUP\",\"value\":\"MC_sonobuoy-te_group_sonobuoy-test_canadacentral\"},{\"name\":\"AKS_REGION\",\"value\":\"canadacentral\"},{\"name\":\"CONTROLLER_TYPE\",\"value\":\"DaemonSet\"},{\"name\":\"USER_ASSIGNED_IDENTITY_CLIENT_ID\",\"value\":\"a02c4905-04be-41ca-85b6-32d86766e758\"},{\"name\":\"AZMON_CONTAINERLOGS_ONEAGENT_REGIONS\",\"value\":\"koreacentral,norwayeast,eastus2\"},{\"name\":\"USING_AAD_MSI_AUTH\",\"value\":\"false\"}],\"image\":\"mcr.microsoft.com/azuremonitor/containerinsights/ciprod:ciprod06272022\",\"imagePullPolicy\":\"IfNotPresent\",\"livenessProbe\":{\"exec\":{\"command\":[\"/bin/bash\",\"-c\",\"/opt/livenessprobe.sh\"]},\"initialDelaySeconds\":60,\"periodSeconds\":60,\"timeoutSeconds\":15},\"name\":\"omsagent\",\"ports\":[{\"containerPort\":25225,\"protocol\":\"TCP\"},{\"containerPort\":25224,\"protocol\":\"UDP\"}],\"resources\":{\"limits\":{\"cpu\":\"500m\",\"memory\":\"750Mi\"},\"requests\":{\"cpu\":\"75m\",\"memory\":\"325Mi\"}},\"securityContext\":{\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/hostfs\",\"name\":\"host-root\",\"readOnly\":true},{\"mountPath\":\"/var/run/host\",\"name\":\"docker-sock\"},{\"mountPath\":\"/var/log\",\"name\":\"host-log\"},{\"mountPath\":\"/var/lib/docker/containers\",\"name\":\"containerlog-path\",\"readOnly\":true},{\"mountPath\":\"/mnt/docker\",\"name\":\"containerlog-path-2\",\"readOnly\":true},{\"mountPath\":\"/mnt/containers\",\"name\":\"containerlog-path-3\",\"readOnly\":true},{\"mountPath\":\"/etc/kubernetes/host\",\"name\":\"azure-json-path\"},{\"mountPath\":\"/etc/omsagent-secret\",\"name\":\"omsagent-secret\",\"readOnly\":true},{\"mountPath\":\"/etc/config/settings\",\"name\":\"settings-vol-config\",\"readOnly\":true},{\"mountPath\":\"/etc/config/settings/adx\",\"name\":\"omsagent-adx-secret\",\"readOnly\":true}]},{\"env\":[{\"name\":\"NODE_IP\",\"valueFrom\":{\"fieldRef\":{\"fieldPath\":\"status.hostIP\"}}},{\"name\":\"AKS_CLUSTER_NAME\",\"value\":\"sonobuoy-test\"},{\"name\":\"AKS_RESOURCE_ID\",\"value\":\"/subscriptions/ce859648-30e1-4135-9d0f-8358aebfe789/resourceGroups/sonobuoy-te_group/providers/Microsoft.ContainerService/managedClusters/sonobuoy-test\"},{\"name\":\"AKS_NODE_RESOURCE_GROUP\",\"value\":\"MC_sonobuoy-te_group_sonobuoy-test_canadacentral\"},{\"name\":\"AKS_REGION\",\"value\":\"canadacentral\"},{\"name\":\"CONTROLLER_TYPE\",\"value\":\"DaemonSet\"},{\"name\":\"CONTAINER_TYPE\",\"value\":\"PrometheusSidecar\"},{\"name\":\"USER_ASSIGNED_IDENTITY_CLIENT_ID\",\"value\":\"a02c4905-04be-41ca-85b6-32d86766e758\"},{\"name\":\"USING_AAD_MSI_AUTH\",\"value\":\"false\"}],\"image\":\"mcr.microsoft.com/azuremonitor/containerinsights/ciprod:ciprod06272022\",\"imagePullPolicy\":\"IfNotPresent\",\"livenessProbe\":{\"exec\":{\"command\":[\"/bin/bash\",\"-c\",\"/opt/livenessprobe.sh\"]},\"initialDelaySeconds\":60,\"periodSeconds\":60,\"timeoutSeconds\":15},\"name\":\"omsagent-prometheus\",\"resources\":{\"limits\":{\"cpu\":\"500m\",\"memory\":\"1Gi\"},\"requests\":{\"cpu\":\"75m\",\"memory\":\"225Mi\"}},\"securityContext\":{\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/etc/kubernetes/host\",\"name\":\"azure-json-path\"},{\"mountPath\":\"/etc/omsagent-secret\",\"name\":\"omsagent-secret\",\"readOnly\":true},{\"mountPath\":\"/etc/config/settings\",\"name\":\"settings-vol-config\",\"readOnly\":true},{\"mountPath\":\"/etc/config/osm-settings\",\"name\":\"osm-settings-vol-config\",\"readOnly\":true}]}],\"dnsConfig\":{\"options\":[{\"name\":\"ndots\",\"value\":\"3\"}]},\"priorityClassName\":\"system-node-critical\",\"serviceAccountName\":\"omsagent\",\"tolerations\":[{\"key\":\"CriticalAddonsOnly\",\"operator\":\"Exists\"},{\"effect\":\"NoExecute\",\"operator\":\"Exists\"},{\"effect\":\"NoSchedule\",\"operator\":\"Exists\"},{\"effect\":\"PreferNoSchedule\",\"operator\":\"Exists\"}],\"volumes\":[{\"hostPath\":{\"path\":\"/\"},\"name\":\"host-root\"},{\"hostPath\":{\"path\":\"/var/run\"},\"name\":\"docker-sock\"},{\"hostPath\":{\"path\":\"/etc/hostname\"},\"name\":\"container-hostname\"},{\"hostPath\":{\"path\":\"/var/log\"},\"name\":\"host-log\"},{\"hostPath\":{\"path\":\"/var/lib/docker/containers\"},\"name\":\"containerlog-path\"},{\"hostPath\":{\"path\":\"/mnt/docker\"},\"name\":\"containerlog-path-2\"},{\"hostPath\":{\"path\":\"/mnt/containers\"},\"name\":\"containerlog-path-3\"},{\"hostPath\":{\"path\":\"/etc/kubernetes\"},\"name\":\"azure-json-path\"},{\"name\":\"omsagent-secret\",\"secret\":{\"secretName\":\"omsagent-secret\"}},{\"configMap\":{\"name\":\"container-azm-ms-agentconfig\",\"optional\":true},\"name\":\"settings-vol-config\"},{\"name\":\"omsagent-adx-secret\",\"secret\":{\"optional\":true,\"secretName\":\"omsagent-adx-secret\"}},{\"configMap\":{\"name\":\"container-azm-ms-osmconfig\",\"optional\":true},\"name\":\"osm-settings-vol-config\"}]}},\"updateStrategy\":{\"rollingUpdate\":{\"maxUnavailable\":\"50%\"},\"type\":\"RollingUpdate\"}}}\n"},"creationTimestamp":"2022-07-23T14:09:43Z","labels":{"component":"oms-agent","controller-revision-hash":"85cf785ddf","kubernetes.azure.com/managedby":"aks","tier":"node"},"name":"omsagent-85cf785ddf","namespace":"kube-system","ownerReferences":[{"apiVersion":"apps/v1","blockOwnerDeletion":true,"controller":true,"kind":"DaemonSet","name":"omsagent","uid":"208213c5-7229-4ee7-bcc8-5d1a22a9b444"}],"resourceVersion":"566","uid":"be5e54fd-7ebd-4d46-95eb-a3d38ee46068"},"revision":1},{"apiVersion":"apps/v1","data":{"spec":{"template":{"$patch":"replace","metadata":{"annotations":{"WSID":"MTNiZGRiOTctOTE1ZS00Zjg0LWJjOWMtNzRiMWE5ZmVhMmEz","agentVersion":"0.0.0-0","dockerProviderVersion":"18.0.1-0","kubernetes.azure.com/no-http-proxy-vars":"true","schema-versions":"v1"},"creationTimestamp":null,"labels":{"component":"oms-agent-win","kubernetes.azure.com/managedby":"aks","tier":"node-win"}},"spec":{"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchExpressions":[{"key":"kubernetes.azure.com/cluster","operator":"Exists"},{"key":"beta.kubernetes.io/os","operator":"In","values":["windows"]},{"key":"kubernetes.io/role","operator":"In","values":["agent"]},{"key":"type","operator":"NotIn","values":["virtual-kubelet"]}]}]}}},"containers":[{"env":[{"name":"FBIT_SERVICE_FLUSH_INTERVAL","value":"15"},{"name":"FBIT_TAIL_BUFFER_CHUNK_SIZE","value":"1"},{"name":"FBIT_TAIL_BUFFER_MAX_SIZE","value":"1"},{"name":"AKS_RESOURCE_ID","value":"/subscriptions/ce859648-30e1-4135-9d0f-8358aebfe789/resourceGroups/sonobuoy-te_group/providers/Microsoft.ContainerService/managedClusters/sonobuoy-test"},{"name":"AKS_REGION","value":"canadacentral"},{"name":"CONTROLLER_TYPE","value":"DaemonSet"},{"name":"USER_ASSIGNED_IDENTITY_CLIENT_ID","value":"a02c4905-04be-41ca-85b6-32d86766e758"},{"name":"HOSTNAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"spec.nodeName"}}},{"name":"NODE_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}},{"name":"PODNAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"SIDECAR_SCRAPING_ENABLED","value":"true"},{"name":"USING_AAD_MSI_AUTH","value":"false"}],"image":"mcr.microsoft.com/azuremonitor/containerinsights/ciprod:win-ciprod06142022","imagePullPolicy":"IfNotPresent","livenessProbe":{"exec":{"command":["cmd","/c","C:\\opt\\omsagentwindows\\scripts\\cmd\\livenessprobe.exe","fluent-bit.exe","fluentdwinaks","C:\\etc\\omsagentwindows\\filesystemwatcher.txt","C:\\etc\\omsagentwindows\\renewcertificate.txt"]},"failureThreshold":3,"initialDelaySeconds":180,"periodSeconds":60,"successThreshold":1,"timeoutSeconds":15},"name":"omsagent-win","resources":{"limits":{"cpu":"500m","memory":"600Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"C:\\ProgramData\\docker\\containers","name":"docker-windows-containers","readOnly":true},{"mountPath":"C:\\var","name":"docker-windows-kuberenetes-container-logs"},{"mountPath":"C:\\etc\\config\\settings","name":"settings-vol-config","readOnly":true},{"mountPath":"C:\\etc\\omsagent-secret","name":"omsagent-secret","readOnly":true},{"mountPath":"C:\\etc\\config\\adx","name":"omsagent-adx-secret","readOnly":true},{"mountPath":"C:\\etc\\kubernetes\\host","name":"azure-json-path","readOnly":true}]}],"dnsConfig":{"options":[{"name":"ndots","value":"3"}]},"dnsPolicy":"ClusterFirst","priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"omsagent","serviceAccountName":"omsagent","terminationGracePeriodSeconds":30,"tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"effect":"NoExecute","operator":"Exists"},{"effect":"NoSchedule","operator":"Exists"},{"effect":"PreferNoSchedule","operator":"Exists"}],"volumes":[{"hostPath":{"path":"C:\\var","type":""},"name":"docker-windows-kuberenetes-container-logs"},{"hostPath":{"path":"C:\\k","type":""},"name":"azure-json-path"},{"hostPath":{"path":"C:\\ProgramData\\docker\\containers","type":"DirectoryOrCreate"},"name":"docker-windows-containers"},{"configMap":{"defaultMode":420,"name":"container-azm-ms-agentconfig","optional":true},"name":"settings-vol-config"},{"name":"omsagent-secret","secret":{"defaultMode":420,"secretName":"omsagent-secret"}},{"name":"omsagent-adx-secret","secret":{"defaultMode":420,"optional":true,"secretName":"omsagent-adx-secret"}}]}}}},"kind":"ControllerRevision","metadata":{"annotations":{"deprecated.daemonset.template.generation":"1","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"addonmanager.kubernetes.io/mode\":\"Reconcile\",\"component\":\"oms-agent-win\",\"kubernetes.io/cluster-service\":\"true\",\"tier\":\"node-win\"},\"name\":\"omsagent-win\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"component\":\"oms-agent-win\",\"tier\":\"node-win\"}},\"template\":{\"metadata\":{\"annotations\":{\"WSID\":\"MTNiZGRiOTctOTE1ZS00Zjg0LWJjOWMtNzRiMWE5ZmVhMmEz\",\"agentVersion\":\"0.0.0-0\",\"dockerProviderVersion\":\"18.0.1-0\",\"kubernetes.azure.com/no-http-proxy-vars\":\"true\",\"schema-versions\":\"v1\"},\"labels\":{\"component\":\"oms-agent-win\",\"kubernetes.azure.com/managedby\":\"aks\",\"tier\":\"node-win\"}},\"spec\":{\"affinity\":{\"nodeAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":{\"nodeSelectorTerms\":[{\"matchExpressions\":[{\"key\":\"kubernetes.azure.com/cluster\",\"operator\":\"Exists\"},{\"key\":\"beta.kubernetes.io/os\",\"operator\":\"In\",\"values\":[\"windows\"]},{\"key\":\"kubernetes.io/role\",\"operator\":\"In\",\"values\":[\"agent\"]},{\"key\":\"type\",\"operator\":\"NotIn\",\"values\":[\"virtual-kubelet\"]}]}]}}},\"containers\":[{\"env\":[{\"name\":\"FBIT_SERVICE_FLUSH_INTERVAL\",\"value\":\"15\"},{\"name\":\"FBIT_TAIL_BUFFER_CHUNK_SIZE\",\"value\":\"1\"},{\"name\":\"FBIT_TAIL_BUFFER_MAX_SIZE\",\"value\":\"1\"},{\"name\":\"AKS_RESOURCE_ID\",\"value\":\"/subscriptions/ce859648-30e1-4135-9d0f-8358aebfe789/resourceGroups/sonobuoy-te_group/providers/Microsoft.ContainerService/managedClusters/sonobuoy-test\"},{\"name\":\"AKS_REGION\",\"value\":\"canadacentral\"},{\"name\":\"CONTROLLER_TYPE\",\"value\":\"DaemonSet\"},{\"name\":\"USER_ASSIGNED_IDENTITY_CLIENT_ID\",\"value\":\"a02c4905-04be-41ca-85b6-32d86766e758\"},{\"name\":\"HOSTNAME\",\"valueFrom\":{\"fieldRef\":{\"fieldPath\":\"spec.nodeName\"}}},{\"name\":\"NODE_IP\",\"valueFrom\":{\"fieldRef\":{\"fieldPath\":\"status.hostIP\"}}},{\"name\":\"PODNAME\",\"valueFrom\":{\"fieldRef\":{\"fieldPath\":\"metadata.name\"}}},{\"name\":\"SIDECAR_SCRAPING_ENABLED\",\"value\":\"true\"},{\"name\":\"USING_AAD_MSI_AUTH\",\"value\":\"false\"}],\"image\":\"mcr.microsoft.com/azuremonitor/containerinsights/ciprod:win-ciprod06142022\",\"imagePullPolicy\":\"IfNotPresent\",\"livenessProbe\":{\"exec\":{\"command\":[\"cmd\",\"/c\",\"C:\\\\opt\\\\omsagentwindows\\\\scripts\\\\cmd\\\\livenessprobe.exe\",\"fluent-bit.exe\",\"fluentdwinaks\",\"C:\\\\etc\\\\omsagentwindows\\\\filesystemwatcher.txt\",\"C:\\\\etc\\\\omsagentwindows\\\\renewcertificate.txt\"]},\"initialDelaySeconds\":180,\"periodSeconds\":60,\"timeoutSeconds\":15},\"name\":\"omsagent-win\",\"resources\":{\"limits\":{\"cpu\":\"500m\",\"memory\":\"600Mi\"}},\"volumeMounts\":[{\"mountPath\":\"C:\\\\ProgramData\\\\docker\\\\containers\",\"name\":\"docker-windows-containers\",\"readOnly\":true},{\"mountPath\":\"C:\\\\var\",\"name\":\"docker-windows-kuberenetes-container-logs\"},{\"mountPath\":\"C:\\\\etc\\\\config\\\\settings\",\"name\":\"settings-vol-config\",\"readOnly\":true},{\"mountPath\":\"C:\\\\etc\\\\omsagent-secret\",\"name\":\"omsagent-secret\",\"readOnly\":true},{\"mountPath\":\"C:\\\\etc\\\\config\\\\adx\",\"name\":\"omsagent-adx-secret\",\"readOnly\":true},{\"mountPath\":\"C:\\\\etc\\\\kubernetes\\\\host\",\"name\":\"azure-json-path\",\"readOnly\":true}]}],\"dnsConfig\":{\"options\":[{\"name\":\"ndots\",\"value\":\"3\"}]},\"priorityClassName\":\"system-node-critical\",\"serviceAccountName\":\"omsagent\",\"tolerations\":[{\"key\":\"CriticalAddonsOnly\",\"operator\":\"Exists\"},{\"effect\":\"NoExecute\",\"operator\":\"Exists\"},{\"effect\":\"NoSchedule\",\"operator\":\"Exists\"},{\"effect\":\"PreferNoSchedule\",\"operator\":\"Exists\"}],\"volumes\":[{\"hostPath\":{\"path\":\"C:\\\\var\"},\"name\":\"docker-windows-kuberenetes-container-logs\"},{\"hostPath\":{\"path\":\"C:\\\\k\"},\"name\":\"azure-json-path\"},{\"hostPath\":{\"path\":\"C:\\\\ProgramData\\\\docker\\\\containers\",\"type\":\"DirectoryOrCreate\"},\"name\":\"docker-windows-containers\"},{\"configMap\":{\"name\":\"container-azm-ms-agentconfig\",\"optional\":true},\"name\":\"settings-vol-config\"},{\"name\":\"omsagent-secret\",\"secret\":{\"secretName\":\"omsagent-secret\"}},{\"name\":\"omsagent-adx-secret\",\"secret\":{\"optional\":true,\"secretName\":\"omsagent-adx-secret\"}}]}},\"updateStrategy\":{\"rollingUpdate\":{\"maxUnavailable\":\"50%\"},\"type\":\"RollingUpdate\"}}}\n"},"creationTimestamp":"2022-07-23T14:09:44Z","labels":{"component":"oms-agent-win","controller-revision-hash":"754c657984","kubernetes.azure.com/managedby":"aks","tier":"node-win"},"name":"omsagent-win-754c657984","namespace":"kube-system","ownerReferences":[{"apiVersion":"apps/v1","blockOwnerDeletion":true,"controller":true,"kind":"DaemonSet","name":"omsagent-win","uid":"67d3a0cc-ceba-4389-a056-41a02fd1e477"}],"resourceVersion":"577","uid":"a292c931-2724-4a5f-bf09-a9bffdec607b"},"revision":1}],"kind":"ControllerRevisionList","metadata":{"resourceVersion":"15219"}}
